version: 0.0.1
dgemm_test1:
  type: script
  description: dgemm test one against intel/18.0.2
  env:
    srcdir: $WORK/buildtest-stampede2/tests/apps/mkl/src
    exe: dgemm
    cc: icc
    cflags: -mkl
  run: |
    module load intel/18.0.2
    $cc --version
    $cc $cflags $srcdir/mkl_dgemm.c -o $exe
    ./$exe

dgemm_test2:
  type: script
  description: dgemm test one against intel/17.0.4
  env:
    srcdir: $WORK/buildtest-stampede2/tests/apps/mkl/src
    exe: dgemm
    cc: icc
    cflags: -mkl
  run: |
    module load intel/17.0.4
    $cc --version
    $cc $cflags $srcdir/mkl_dgemm.c -o $exe
    ./$exe


dgemm_test3:
  type: script
  description: dgemm test one against intel/16.0.3
  env:
    srcdir: $WORK/buildtest-stampede2/tests/apps/mkl/src
    exe: dgemm
    cc: icc
    cflags: -mkl
  run: |
    module load intel/16.0.3
    $cc --version
    $cc $cflags $srcdir/mkl_dgemm.c -o $exe
    ./$exe

