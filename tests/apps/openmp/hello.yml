version: 0.0.1

hello_c_openmp:
  description: Hello World example with OpenMP using gnu compiler
  type: script
  env:
    srcdir: $WORK/buildtest-stampede2/tests/apps/openmp/src
    exe: hello
  run: |
    gcc -fopenmp -o $exe $srcdir/omp_hello.c
    OMP_NUM_THREADS=2
    ./$exe

    OMP_NUM_THREADS=4
    ./$exe

job_test:
  description: Hello World example with OpenMP using gnu compiler
  type: script
  env:
    srcdir: $WORK/buildtest-stampede2/tests/apps/openmp/src
    exe: hello_sbatch
  run: |
    #SBATCH -N 1
    #SBATCH -n 1
    #SBATCH -p normal
    #SBATCH -t 00:10
    gcc -fopenmp -o $exe $srcdir/omp_hello.c
    OMP_NUM_THREADS=2
    ./$exe

